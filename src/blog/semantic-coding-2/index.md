---
title: 'Семантическая вёрстка. Часть вторая'
date: 2008-04-24
tags: post
layout: post.njk
---

Современный взгляд на организацию кода. По материалам доклада «Семантическая вёрстка» на конференциях [ClientSide 2007](http://www.client2007.ru/) и [UA Web 2008](http://uaweb.in.ua/). Продолжение.

Начало — «[Семантическая вёрстка. Часть первая](/blog/semantic-coding-1/)».

## Второй уровень семантики

Для создания второго смыслового уровня документа у нас есть два способа именования элементов: `id` и `class`. Каждый имеет свои особенности, в силу которых формируются типичные ситуации применения каждого из них.

Имя элемента характеризует его функциональность или содержимое: _упорядоченный список_ (первый уровень семантики) _комментариев_ (второй уровень семантики).

    <ol id="comments">
        <li>Первый</li>
        <li>Второй</li>
    </ol>

Согласно спецификации, `id` — это имя уникального элемента, в большей степени подходит для создания _структурной_ разметки документа:

    <body>
        <div id="header"></div>
        <div id="content"></div>
        <div id="footer"></div>
    </body>

В отдельном случае, `id` применяется для создания связей ярлык-поле при помощи атрибута `for` элемента `<label>`:

    <label for="full-name">
        Полное имя
    </label>
    <input type="text" id="full-name">

В то время, как `class` — это общее имя множества элементов и, соответственно, их общая семантическая роль. Множественные классы для одного элемента позволяют удобно комбинировать не только стили, но ещё смысловые значения нескольких имён. Данный фрагмент микроформата [hCard](http://microformats.org/wiki/hcard) говорит нам о том, что эта ссылка ведёт на _сайт_ (url) _организации_ (org) под _названием_ (fn) «Яндекс»:

    <a href="http://yandex.ru/" class="fn org url">
        Яндекс
    </a>

Таким образом, применяя `id` для структурной разметки, мы создаём некие пространства имён, благодаря которым мы можем адресовать применение стилей для элементов с одинаковыми смысловыми ролями и, соответственно, именами классов. В качестве примера такой ситуации, можно привести оформление ссылок на RSS-поток, которые в шапке и подвале документа, в нашем случае, должны отличаться цветами:

    <div id="header">
        <a href="#" class="rss">RSS</a>
    </div>
    <div id="footer">
        <a href="#" class="rss">RSS</a>
    </div>

    .rss {
        padding-left:20px;
        background: url(rss.png) no-repeat;
    }

    #header .rss {
        color:#C00;
    }

    #footer .rss {
        color:#069;
    }

Семантически верное именование HTML-элементов при помощи атрибутов `id` и `class`, помимо самой семантики, привносит упорядоченность не только в сам документ, а ещё и в процесс разработки.

Правильно именованный код удобно читать, разбираться во всех его хитросплетениях, даже если этот код чужой. Личный опыт показывает, что при использовании последовательной и логичной политики именования элементов, а также отступов, формирующих дерево документа, практически полностью отпадает необходимость разметки кода HTML-комментариями, поясняющими где блок начался, где закончился и что в нём вообще содержится. Всё и так легко понимается из визуальной структуры и имён элементов.

## Третий уровень семантики

Основа интернета — это гипертекстуальность, т.е. связь документов при помощи гиперссылок, создающая единое информационное пространство сети. Говоря же о третьем уровне семантики, мы подразумеваем создание смысловых связей между семантическими единицами в документе.

Единственным внятным примером этого механизма на данный момент являются [микроформаты](http://microformats.org) (μf). Идейным вдохновителем данной методики семантической разметки является Тантек Челик (Tantek Çelik), известный нам по работе над IE для Mac, [Box Model Hack](http://tantek.com/CSS/Examples/boxmodelhack.html) и проекту [Technorati](http://technorati.com/).

Микроформаты сами по себе являются большой темой для изучения, для чего я могу порекомендовать следить за обновлениями следующих ресурсов:

- [Microformats](http://microformats.org/) — официальный блог и wiki-документация
- [Microformatique](http://microformatique.com/) — блог Джона Оллсопа (John Allsopp), автора [книги о микроформатах](http://www.amazon.com/gp/product/1590598148?ie=UTF8&tag=microformatiq-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1590598148)
- [Микроформаты](http://habrahabr.ru/blog/microformats/) — о микроформатах по-русски на Хабрхабре

Я же продемонстрирую вам некоторые примеры превращения скверной разметки в разметку, содержащую новые смысловые уровни, и просто интересные примеры использования микроформатов.

В качестве первого примера можно привести разметку имени пользователя и маленькой иконки рядом, так называемого «головастика», который используется в сервисе блогов [Livejournal.com](http://www.livejournal.com/). Вот, каким образом это выглядит сейчас:

    <span class='ljuser' lj:user='kuteev' style='white-space: nowrap;'>
        <a href='#'>
            <img src='#' alt='[info]' width='17' height='17'
                style='vertical-align: bottom;
                border: 0; padding-right: 1px;'>
        </a>
        <a href='#'>
            <b>kuteev</b>
        </a>
    </span>

Давайте внимательно рассмотрим, какую же полезную информацию мы можем извлечь из приведённой разметки:

- Юзернейм не переносится, ибо `white-space: nowrap`
- Головастика выровняли по вертикали, отключили у него рамку, отступ и задали размеры — `width='17' height='17' style='…'`
- Кутеев, оказывается, полужирный, поскольку `<b>kuteev</b>`

Впечатляющая подборка… Но давайте всё-таки попробуем улучшить эту разметку, используя микроформат [hCard](http://microformats.org/wiki/hcard) и долю здравого смысла:

    <span class="ljuser vcard">
        <a href="#" target="_blank"
            class="ico" title="Профиль">
            <img src="#" alt="">
        </a>
        <a href="#" target="_blank"
            class="fn nickname url" title="Журнал">
            kuteev
        </a>
    </span>

Что же нового мы теперь можем узнать:

- Мы имеем дело с мини-визиткой Кутеева, потому как `class="vcard"`
- Ссылка с головастика ведёт в профиль — мы уточнили `title="Профиль"`
- Никнейм Кутеева — kuteev, мы видим `class="fn nickname"`
- Ссылка с никнейма ведёт на сайт Кутеева — `class="nickname url"`, а точнее — в журнал, — мы уточнили `title="Журнал"`
- Пара нажатий — и Кутеев добавлен в мою адресную книгу

Данный код был написан мною для проекта [Livejournal.ru](http://www.livejournal.ru/), где таким образом были размечены все имена пользователей. Надеюсь, что в скором будущем подобная разметка будет использоваться и на [Livejournal.com](http://www.livejournal.com/).

Следующий пример более абстрактен и демонстрирует разметку информации о компании при помощи микроформата [hCard](http://microformats.org/wiki/hcard), которая дополняется картой расположения офиса, при помощи [Google Maps API](http://code.google.com/apis/maps/):

    <div class="vcard">
        <h1 class="fn org">Яндекс</h1>
        <dl>
            <dt>Адрес:</dt>
            <dd class="adr">
                <span class="postal-code">111033</span>,
                <span class="locality">Москва</span>,
                <span class="street-address">
                    ул. Самокатная, дом 1
                </span>
            </dd>
        <dl>
        <div id="map" class="geo">
            <abbr class="latitude" title="55.7582">
                N 55° 75.82
            </abbr>
            <abbr class="longitude" title="37.6786">
                W 37° 67.86
            </abbr>
        </div>
    </div>

- Мы имеем дело с визиткой организации и называется она «Яндекс» — `class="fn org"`
- У нас есть её структурно размеченный адрес: `postal-code`, `locality`, `street-address`
- Также нам известно точное географическое положение организации, обозначенное в в элементах `<abbr>`: `class="latitude"` и `title="55.7582"`, `class="longitude"` и `title="37.6786"`
- При помощи несложного JavaScript-кода и [Google Maps API](http://code.google.com/apis/maps/) мы извлекаем информацию о координатах и рисуем в элементе с `id="map"` карту, спозиционированную точно в нужном месте
- Пара нажатий — и «Яндекс» добавлен в мою адресную книгу

Соответственно, вся информация из приведённых примеров становится доступна поисковым машинам и плагинам ваших браузеров, поскольку её разметка формализована в [спецификации микроформата hCard](http://microformats.org/wiki/hcard). Попробуйте сами:

- Плагины для Firefox — [Operator](https://addons.mozilla.org/ru/firefox/addon/4106) и [Tails Export](https://addons.mozilla.org/ru/firefox/addon/2240)
- Плагин для Safari — [Safari Microformats](http://zappatic.net/safarimicroformats/)

## Семантика! Почему это важно

Суммируя всё вышесказанное, постараемся собрать все основные преимущества семантической вёрстки, как для разработчика, так и для конечного пользователя:

Повышение доступности сайта для альтернативных устройств просмотра. Речь идёт о всех устройствах, альтернативных привычному десктопному браузеру: мобильные и голосовые браузеры, принтеры, поисковые роботы. Для всех из них очень полезен первый уровень семантики в документе — т.е. логичная разметка информации:

- Мобильный браузер легко обработает валидный код, не переполненный презентационной разметкой, который, в большинстве случаев, окажется ещё и компактнее. В случае с предварительной обработкой страницы, как происходит при работе с [Opera Mini](http://www.operamini.com/), мы получаем, по меньшей мере, два преимущества: отсутствие потенциально опасной необходимости выпрямлять табличный макет для умещения его в небольшой экран устройства и такую специфическую особенность, как сворачивание меню в один блок, с возможностью его развернуть. За счёт этого экономится место на экране, а работает это всё на основе обычных списков. Также, подобная практика разметки страниц, позволяет легко писать специальные файлы стилей для мобильных устройств, на основе единого макета.
- Голосовой браузер правильно акцентирует каждый уровень заголовков, последовательно перечислит общие элементы списка, без необходимости продираться через каждую табличную строчку и ячейку макета, мешая и так непростому использованию сайтов людьми с ограниченными возможностями.
- Создание версии для печати превращается либо в простое отключение стилей, либо в минимальное оформление документа, который уже и так готов для удобного чтения.
- Поисковые машины оценят вашу работу. И речь идёт не только о весе ключевых слов в заголовке `<h1>`, вместо несуразности `<td class="title">` и общем уменьшении мусорного кода на странице, но ещё и о всё более широко внедряемой поддержке микроформатов для более точного и подробного анализа ваших документов.

Использование языка в соответствии с его предназначением. Упомянутая выше концепция [POSH](http://microformats.org/wiki/posh) (Plain Old Semantic HTML) основывается, прежде всего, на использовании встроенных возможностей языка. Прежде чем работать с HTML, неплохо было бы изучить его. К примеру, по этой статье: «[Встроенная семантика в HTML](http://microformatique.com/?p=82)» (Built in Semantics in HTML). Вполне вероятно, что после изучения всех возможностей HTML, вам больше не захочется называть вёрстку «дивной». Иначе говоря, использование вещей по их прямому назначению — это всегда наиболее оптимально.

Самодокументируемый код. При использовании второго уровня семантики в документе, а именно — именования элементов в соответствии с их содержимым или назначением, ваш код начинает звучать. Теперь это не просто набор бессмысленных классов вроде `border4px` или `no-margin-right`, а полноценный скелет вашего документа, который можно легко читать по внятно именованным ключевым элементам. Это не только упрощает разработку и поддержку сайтов, но ещё и является отличной основой для единого стиля вёрстки для целой команды, чтобы _работа_ с кодом не превращалась в _борьбу_ с кодом.

Новые смысловые уровни документа, удобная работа с ними. Речь, в данном случае, идёт о микроформатах, которые позволяют извлекать и интерпретировать максимально точно размеченную информацию из вашего документа, без использования сложных морфологических алгоритмов, всего лишь на основе формализованного синтаксиса. Мгновенный доступ к нужной информации средствами браузера, плагинов, веб-сервисов или поисковых машин — это уже сегодняшний день. Не опоздайте на уходящий поезд.

## О «шмемантике»

Небольшая ремарка о понятии «семантика» относительно вёрстки. Это не попытка подвести серьёзную научную базу под саму вёрстку и технологии с ней связанные, и не игры во что-то высокое, светлое и элитарное. Семантическая вёрстка — это всего лишь набор идеологических установок и приёмов, которые помогут вам работать более уверенно и последовательно, создавая действительно качественную разметку. Если ваша задача просто «фигачить», вам сложно будет понять, о чём я, собственно, здесь рассказываю. По этой причине публикация «[Семантика-шмемантика](http://ay4.getalime.ru/blog/2008/04/24/semantics-shmemantics/)» ([её архивная версия](http://web.archive.org/web/20080730163823/http://ay4.getalime.ru/blog/2008/04/24/semantics-shmemantics/)) не может вызвать какой-либо дискуссии — мы говорим о разных вещах, хоть и используем одинаковую терминологию.

Напоследок — серия публикаций по теме, обязательных для ознакомления:

- Джон Оллсоп (John Allsopp) — «[Semantics in HTML](http://microformatique.com/?p=83)», «[Built in Semantics in HTML](http://microformatique.com/?p=82)»
- Тантек Челик (Tantek Çelik) — «[A Touch of Class](http://tantek.com/log/2002/12.html#L20021216)», «[The Importance of Being POSH](http://tantek.com/log/2007/04.html#d20t0823)»
- Джесс Скиннер (Jesse Skinner) — «[Who will read your Semantic HTML?](http://www.thefutureoftheweb.com/blog/who-will-read-your-semantic-html)»
